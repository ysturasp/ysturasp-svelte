<script>
	import { page } from '$app/stores';
	import { browser } from '$app/environment';
	import Header from '$lib/components/layout/Header.svelte';
	import ErrorContent from '$lib/components/common/ErrorContent.svelte';
	import PageLayout from '$lib/components/layout/PageLayout.svelte';
	import { onMount } from 'svelte';

	let isOffline = false;

	onMount(() => {
		if (browser) {
			isOffline = !navigator.onLine;

			const handleOnline = () => {
				isOffline = false;
			};

			const handleOffline = () => {
				isOffline = true;
			};

			window.addEventListener('online', handleOnline);
			window.addEventListener('offline', handleOffline);

			return () => {
				window.removeEventListener('online', handleOnline);
				window.removeEventListener('offline', handleOffline);
			};
		}
	});
</script>

<svelte:head>
	<title
		>{isOffline ? '–ù–µ—Ç –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è –∫ –∏–Ω—Ç–µ—Ä–Ω–µ—Ç—É - ystuRASP' : '–£–ø—Å.. –û—à–∏–±–æ—á–∫–∞ - ystuRASP'}</title
	>
	<meta
		name="description"
		content={isOffline
			? '–ù–µ—Ç –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è –∫ –∏–Ω—Ç–µ—Ä–Ω–µ—Ç—É. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ —Å–æ–µ–¥–∏–Ω–µ–Ω–∏–µ –∏ –ø–æ–ø—Ä–æ–±—É–π—Ç–µ —Å–Ω–æ–≤–∞. –ù–µ–∫–æ—Ç–æ—Ä—ã–µ —Ñ—É–Ω–∫—Ü–∏–∏ –º–æ–≥—É—Ç —Ä–∞–±–æ—Ç–∞—Ç—å –≤ –æ—Ñ–ª–∞–π–Ω —Ä–µ–∂–∏–º–µ.'
			: '–£–∑–Ω–∞–π—Ç–µ —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫—É –æ—Ü–µ–Ω–æ–∫ —Å—Ç—É–¥–µ–Ω—Ç–æ–≤ –Ø–ì–¢–£, —Å—Ä–µ–¥–Ω–∏–µ –±–∞–ª–ª—ã –∏ —Ä–∞—Å–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ –æ—Ü–µ–Ω–æ–∫ –ø–æ —Ä–∞–∑–ª–∏—á–Ω—ã–º –¥–∏—Å—Ü–∏–ø–ª–∏–Ω–∞–º. ysturasp'}
	/>
	<link rel="icon" href="images/cat.png" type="image/png" />
</svelte:head>

<PageLayout>
	<Header />
	<main class="container mx-auto mt-5 px-3 md:mt-7 md:px-0">
		{#if isOffline}
			<div class="flex min-h-[60vh] flex-col items-center justify-center p-8 text-center">
				<div class="mb-8">
					<div class="mb-4 text-6xl">üì°</div>
					<h1 class="mb-4 text-3xl font-bold text-white">–ù–µ—Ç –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è –∫ –∏–Ω—Ç–µ—Ä–Ω–µ—Ç—É</h1>
					<p class="mb-8 max-w-lg text-lg leading-relaxed text-gray-300">
						–≠—Ç–∞ —Å—Ç—Ä–∞–Ω–∏—Ü–∞ –Ω–µ –±—ã–ª–∞ –∑–∞–≥—Ä—É–∂–µ–Ω–∞ –ø—Ä–∏ –Ω–∞–ª–∏—á–∏–∏ –∏–Ω—Ç–µ—Ä–Ω–µ—Ç–∞ –∏ –Ω–µ –º–æ–∂–µ—Ç –±—ã—Ç—å
						–æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∞ –≤ –æ—Ñ–ª–∞–π–Ω —Ä–µ–∂–∏–º–µ
					</p>
				</div>
				<div class="flex flex-col gap-3 sm:flex-row">
					<button
						on:click={() => window.location.reload()}
						class="flex items-center gap-2 rounded-lg bg-blue-700 px-3 py-3 font-medium text-white transition-all hover:bg-blue-600"
					>
						<svg class="h-5 w-5" viewBox="0 0 20 20" fill="currentColor">
							<path
								fill-rule="evenodd"
								d="M4 2a1 1 0 011 1v2.101a7.002 7.002 0 0111.601 2.566 1 1 0 11-1.885.666A5.002 5.002 0 005.999 7H9a1 1 0 010 2H4a1 1 0 01-1-1V3a1 1 0 011-1zm.008 9.057a1 1 0 011.276.61A5.002 5.002 0 0014.001 13H11a1 1 0 110-2h5a1 1 0 011 1v5a1 1 0 11-2 0v-2.101a7.002 7.002 0 01-11.601-2.566 1 1 0 01.61-1.276z"
								clip-rule="evenodd"
							/>
						</svg>
						–ü–æ–ø—Ä–æ–±–æ–≤–∞—Ç—å —Å–Ω–æ–≤–∞
					</button>
					<button
						on:click={() => window.history.back()}
						class="flex items-center gap-2 rounded-lg bg-slate-700 px-6 py-3 font-medium text-white transition-all hover:bg-slate-600"
					>
						<svg class="h-5 w-5" viewBox="0 0 20 20" fill="currentColor">
							<path
								fill-rule="evenodd"
								d="M9.707 16.707a1 1 0 01-1.414 0l-6-6a1 1 0 010-1.414l6-6a1 1 0 011.414 1.414L5.414 9H17a1 1 0 110 2H5.414l4.293 4.293a1 1 0 010 1.414z"
								clip-rule="evenodd"
							/>
						</svg>
						–ù–∞–∑–∞–¥
					</button>
				</div>
			</div>
		{:else}
			<ErrorContent
				status={$page.status}
				message={$page.status === 404
					? '–ö —Å–æ–∂–∞–ª–µ–Ω–∏—é, –∑–∞–ø—Ä–∞—à–∏–≤–∞–µ–º–∞—è –≤–∞–º–∏ —Å—Ç—Ä–∞–Ω–∏—Ü–∞ –Ω–µ —Å—É—â–µ—Å—Ç–≤—É–µ—Ç. –ü–æ—Ö–æ–∂–µ, —á—Ç–æ –æ–Ω–∞ –µ—â–µ –Ω–µ —Å–æ–∑–¥–∞–Ω–∞ –∏–ª–∏ —É –Ω–∞—Å –Ω–µ–±–æ–ª—å—à–∏–µ —Ä–∞–±–æ—Ç—ã'
					: '–ü—Ä–æ–∏–∑–æ—à–ª–∞ –Ω–µ–ø—Ä–µ–¥–≤–∏–¥–µ–Ω–Ω–∞—è –æ—à–∏–±–∫–∞. –ú—ã —É–∂–µ —Ä–∞–±–æ—Ç–∞–µ–º –Ω–∞–¥ –µ—ë —É—Å—Ç—Ä–∞–Ω–µ–Ω–∏–µ–º.'}
			/>
		{/if}
	</main>
</PageLayout>
